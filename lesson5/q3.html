<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Задание3Урок3</title>
	<style>
		*{margin:0; padding:0;}}
		body, hStml {width: 100%; height:90%;}
		.main {max-width: 750px; margin: 5% auto;}
		header{display: flex; justify-content: space-between;}
		main{display: flex; justify-content: space-between;}
		img{width: 100%;}
		.pic{max-width: 49%;}
		button{width: 30px; height: 30px; margin: 5px;}
		.line{ height: 35px; }
		.center {display: flex; align-items: center; justify-content: center;}
		.manageGroup{min-height: 250px; min-width: 250px;}
		.screenGroup{min-height: 250px; min-width: 250px;}
		.topButtonGroup{min-width: 500px; display: flex; align-items: center; justify-content: space-between;}
		.navBtn{min-width: 50px;min-height: 35px;}
		.red{ background-color: red; }
		.green{background-color: green;}
	</style>
</head>
<body>
	<script type="text/javascript">
		const config = {
		    rowsCount: 10,
		    colsCount: 10,
		};
		const player = {
		    x: 0,
		    y: 0,
		    move(nextPoint) {
		        this.x = nextPoint.x;
		        this.y = nextPoint.y;
		    },
		};

		let renderer = {
		    map: "",
		    render() {
		        for (let row = 0; row < config.rowsCount; row++) {
		            for (let col = 0; col < config.colsCount; col++) {
		                if (player.y === row && player.x === col) {
		                    this.map += 'o ';
		                } else {
		                    this.map += 'x ';
		                }
		            }
		            this.map += '\n';
		        }
		        console.log(this.map);
		    },
		    clear() {
		 		console.clear();  
		        this.map = "";
		    }
		};

		let mover = {
		    getDirection() {
		        const availableDirections = [1, 2, 3, 4, 7, 6, 8, 9];
		        while (true) {
		            let direction = parseInt(prompt('Введите число (2, 4, 6 или 8), куда вы хотите переместиться, "Отмена" для выхода.'));
		            if (isNaN(direction)) {
		                return null;
		            }
		            if (!availableDirections.includes(direction)) {
		                alert('Для перемещения необходимо ввести одно из чисел 2, 4, 6 или 8.');
		                continue;
		            }
		            return direction;
		        }
		    },
		    getNextPosition(direction) {
		        const nextPosition = {
		            x: player.x,
		            y: player.y,
		        };
			    switch (direction) {
			    	case 1:
			    		if(nextPosition.x>0){nextPosition.x--};
			    		if(nextPosition.y<9){nextPosition.y++};	
			    		break;
		            case 2:
		            	if(nextPosition.y<9){nextPosition.y++};
		                break;
		            case 3:
			    		if(nextPosition.x<9){nextPosition.x++};
			    		if(nextPosition.y<9){nextPosition.y++};	
			    		break;    	
		            case 4:
		                if(nextPosition.x>0){nextPosition.x--};
		                break;
		            case 6:
		                if(nextPosition.x<9){nextPosition.x++};
		                break;
		            case 7:
			    		if(nextPosition.x>0){nextPosition.x--};
			    		if(nextPosition.y>0){nextPosition.y--};	
			    		break;    
		            case 8:
		                if(nextPosition.y>0){nextPosition.y--};
		                break;
		            case 9:
			    		if(nextPosition.x<9){nextPosition.x++};
			    		if(nextPosition.y>0){nextPosition.y--};	
			    		break;
			        }		    	
		        return nextPosition;
		    },
		};

		let game = {
		    run() {
		        while (true) {
		            const direction = mover.getDirection();
		            if (direction === null) {
		                console.log("Игра окончена.");
		                return;
		            }
		            const nextPoint = mover.getNextPosition(direction);
		            renderer.clear();
		            player.move(nextPoint);
		            renderer.render();
   		        }
		    },
		    init() {
		        console.log("Ваше положение на поле в виде о.");
		        renderer.render();
		        console.log("Чтобы начать игру наберите game.run() и нажмите Enter.");
		    }
		};
		game.init();
	</script>
	<div class="main">
		<header>
			<a href="../homework.html">На главную</a>
			<h3>Задание 3 к уроку №4 курса JavaScript от GeekBrains</h3>
			</br>
		</header>
		<nav class="topButtonGroup">
			<div>
				<button class="navBtn green">Start page</button>
				<button class="navBtn green" onclick="game.run()">Start console</button>
			</div>
			<h4>игра "Бродилка"</h4>
			<button class="navBtn red">Stop</button>
		</nav>
		</br>
		<main>
			<div class="pic center screenGroup">
				<div class="window" id="showGame"/>
					JHBKLhjo;irjg;oilerjgoiuedrjmglksduirhjgloksdijg;
				</div>
			</div>
			<div class="pic center manageGroup">
				<div class="window " id="manageGame"/>
					<div id="firtLine" class="line center">
						<button></button>
						<button>&#8743;</button>
						<button></button>
					</div>	
					<div id="secondLine" class="line center">
						<button><</button>
						<button></button>
						<button>></button>
					</div>	
					<div id="secondLine" class="line center">
						<button></button>
						<button>&#8744;</button>
						<button></button>
					</div>	
				</div>
			</div>
		</main>
	</div>	
</body>
</html>
